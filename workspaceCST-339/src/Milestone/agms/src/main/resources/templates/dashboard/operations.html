<!--

This HTML file is a Thymeleaf template for the operations dashboard of an airport gate management system. It includes the following sections:

1. Statistics Overview:
    - Displays total gates, available gates, occupied gates, and gates under maintenance.
    - Each statistic is shown in a card with an icon and a dynamic value fetched from the `statistics` object.

2. Gate Status Overview:
    - A table that lists the status of each gate, including the current and next flights.
    - Each row includes actions to edit or mark the gate for maintenance.

3. Terminal Map:
    - A visual representation of the terminals and gates.
    - Each gate is displayed with its status color-coded based on the `gateStatuses` object.

Thymeleaf attributes (`th:text`, `th:each`, `th:classappend`, etc.) are used to dynamically populate the content based on the data provided by the server.
-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/MainLayout :: layout(~{::div})}">
<body>
    <div th:fragment="content">
        <!-- Statistics Overview -->
        <div class="row g-4 mb-4">
            <!-- Total Gates -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100">
                    <div class="card-body">
                        <div class="d-flex align-items-start justify-content-between">
                            <div>
                                <h6 class="card-subtitle mb-2 text-muted">Total Gates</h6>
                                <h2 class="card-title mb-0" th:text="${statistics.totalGates}">0</h2>
                            </div>
                            <div class="p-2 bg-primary bg-opacity-10 rounded">
                                <i class="fas fa-door-open text-primary fs-4"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Available Gates -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100">
                    <div class="card-body">
                        <div class="d-flex align-items-start justify-content-between">
                            <div>
                                <h6 class="card-subtitle mb-2 text-muted">Available Gates</h6>
                                <h2 class="card-title mb-0 text-success" th:text="${statistics.availableGates}">0</h2>
                            </div>
                            <div class="p-2 bg-success bg-opacity-10 rounded">
                                <i class="fas fa-check-circle text-success fs-4"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Occupied Gates -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100">
                    <div class="card-body">
                        <div class="d-flex align-items-start justify-content-between">
                            <div>
                                <h6 class="card-subtitle mb-2 text-muted">Occupied Gates</h6>
                                <h2 class="card-title mb-0 text-warning" th:text="${statistics.occupiedGates}">0</h2>
                            </div>
                            <div class="p-2 bg-warning bg-opacity-10 rounded">
                                <i class="fas fa-plane text-warning fs-4"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gates Under Maintenance -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100">
                    <div class="card-body">
                        <div class="d-flex align-items-start justify-content-between">
                            <div>
                                <h6 class="card-subtitle mb-2 text-muted">Under Maintenance</h6>
                                <h2 class="card-title mb-0 text-danger" th:text="${statistics.maintenanceGates}">0</h2>
                            </div>
                            <div class="p-2 bg-danger bg-opacity-10 rounded">
                                <i class="fas fa-tools text-danger fs-4"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gate Status Overview -->
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Gate Status Overview</h5>
                <button class="btn btn-primary btn-sm">
                    <i class="fas fa-sync-alt me-1"></i> Refresh
                </button>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Gate</th>
                                <th>Status</th>
                                <th>Current Flight</th>
                                <th>Next Flight</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="entry : ${gateStatuses}">
                                <td th:text="${entry.key}">Gate ID</td>
                                <td>
                                    <span class="badge" 
                                          th:classappend="${'bg-' + entry.value.cssClass}"
                                          th:text="${entry.value.label}">Status</span>
                                </td>
                                <td>AA123</td>
                                <td>UA456</td>
                                <td>
                                    <div class="btn-group btn-group-sm">
                                        <button class="btn btn-outline-primary">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-outline-danger">
                                            <i class="fas fa-tools"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Terminal Map -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Terminal Map</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-12 mb-4" th:each="terminal : ${#numbers.sequence(1, 4)}">
                        <h6 th:text="'Terminal ' + ${terminal}">Terminal</h6>
                        <div class="d-flex gap-2">
                            <div th:each="gate : ${#numbers.sequence(1, 5)}" 
                                 class="p-3 rounded border text-center"
                                 th:with="gateId='T' + ${terminal} + 'G' + ${gate},
                                         status=${gateStatuses.get(gateId)}"
                                 th:classappend="${status != null ? 'bg-' + status.cssClass + ' bg-opacity-25' : 'bg-secondary bg-opacity-25'}">
                                <strong th:text="${gateId}">Gate</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>